<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Galeria de Vídeos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
  <div class="p-4">
    <button onclick="handleSignInClick()" class="bg-blue-500 text-white px-4 py-2 rounded">Login com Google</button>
    <button onclick="handleSignOutClick()" class="bg-gray-500 text-white px-4 py-2 rounded">Logout</button>
    <button onclick="listarVideos()" class="bg-green-500 text-white px-4 py-2 rounded">Listar Vídeos</button>
    <button onclick="adicionarVideo()" class="bg-indigo-500 text-white px-4 py-2 rounded">Adicionar Vídeo Exemplo</button>
    <div id="output" class="mt-4"></div>
  </div>
  <script>
    // Substitua pelos seus dados do Google Cloud
    const CLIENT_ID = 'SUA_CLIENT_ID.apps.googleusercontent.com';
    const API_KEY = 'SUA_API_KEY';
    const DISCOVERY_DOCS = [
      "https://sheets.googleapis.com/$discovery/rest?version=v4"
    ];
    const SCOPES = "https://www.googleapis.com/auth/spreadsheets";
    const SPREADSHEET_ID = '1pt2V3fGNvDH004nwxS_stpJSyysCCzgUdU0FRWokZrU';

    window.onload = function() {
      gapi.load('client:auth2', initClient);
    };

    function initClient() {
      gapi.client.init({
        apiKey: API_KEY,
        clientId: CLIENT_ID,
        discoveryDocs: DISCOVERY_DOCS,
        scope: SCOPES
      }).then(() => {
        updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
      });
    }

    function updateSigninStatus(isSignedIn) {
      if (isSignedIn) {
        document.getElementById('output').innerText = 'Logado!';
      } else {
        document.getElementById('output').innerText = 'Deslogado!';
      }
    }

    function handleSignInClick() {
      gapi.auth2.getAuthInstance().signIn();
    }

    function handleSignOutClick() {
      gapi.auth2.getAuthInstance().signOut();
    }

    function listarVideos() {
      gapi.client.sheets.spreadsheets.values.get({
        spreadsheetId: SPREADSHEET_ID,
        range: "A:B"
      }).then(response => {
        const rows = response.result.values;
        if (rows && rows.length) {
          document.getElementById('output').innerText = rows.map(r => r.join(' | ')).join('\\n');
        } else {
          document.getElementById('output').innerText = 'Nenhum vídeo encontrado.';
        }
      });
    }

    function adicionarVideo() {
      const titulo = prompt('Título do vídeo:');
      const link = prompt('Link do vídeo:');
      if (!titulo || !link) return;
      gapi.client.sheets.spreadsheets.values.append({
        spreadsheetId: SPREADSHEET_ID,
        range: "A:B",
        valueInputOption: "RAW",
        insertDataOption: "INSERT_ROWS",
        resource: {
          values: [[titulo, link]]
        }
      }).then(response => {
        alert('Vídeo adicionado!');
        listarVideos();
      });
    }
  </script>
</body>
</html>
